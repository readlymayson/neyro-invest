# Документация системы нейросетевых инвестиций

## Обзор

Система нейросетевых инвестиций предназначена для автоматизированного инвестирования на российском рынке с использованием множества нейросетей для анализа и принятия торговых решений.

## Архитектура системы

### Основные компоненты

1. **Система данных** (`src/data/`)
   - Провайдер данных для российского рынка
   - Поддержка Yahoo Finance API
   - Технические индикаторы
   - Кэширование данных

2. **Нейросети** (`src/neural_networks/`)
   - LSTM для предсказания цен
   - XGBoost для классификации сигналов
   - Ансамблевые методы
   - Интерфейс для добавления новых моделей

3. **Торговый движок** (`src/trading/`)
   - Обработка торговых сигналов
   - Управление ордерами
   - Интеграция с брокерами
   - Бумажная торговля

4. **Управление портфелем** (`src/portfolio/`)
   - Отслеживание позиций
   - Расчет рисков
   - Метрики производительности
   - Ребалансировка

5. **Ядро системы** (`src/core/`)
   - Координация компонентов
   - Основной цикл торговли
   - Управление состоянием

## Быстрый старт

### Установка

```bash
# Клонирование репозитория
git clone <repository-url>
cd neyro-invest

# Установка зависимостей
pip install -r requirements.txt

# Создание директорий
mkdir -p logs models data
```

### Конфигурация

Отредактируйте файл `config/main.yaml` для настройки системы:

```yaml
# Основные настройки
data:
  symbols: [SBER, GAZP, LKOH, NVTK]  # Российские акции
  update_interval: 60  # Обновление данных каждую минуту

trading:
  broker: paper  # Бумажная торговля для начала
  signal_threshold: 0.6  # Порог уверенности сигналов

portfolio:
  initial_capital: 1000000  # Начальный капитал в рублях
  max_risk_per_trade: 0.02  # Максимум 2% риска на сделку
```

### Запуск

```bash
# Базовое использование
python examples/basic_usage.py

# Обучение моделей
python examples/training_models.py --mode train

# Бэктестинг
python examples/backtesting.py
```

## Конфигурация нейросетей

### LSTM модель

```yaml
neural_networks:
  models:
    - name: lstm_predictor
      type: lstm
      weight: 0.3
      enabled: true
      sequence_length: 60
      lstm_units: [50, 50]
      dropout_rate: 0.2
      learning_rate: 0.001
      epochs: 100
```

### XGBoost модель

```yaml
neural_networks:
  models:
    - name: xgboost_classifier
      type: xgboost
      weight: 0.3
      enabled: true
      n_estimators: 100
      max_depth: 6
      buy_threshold: 0.05
      sell_threshold: -0.05
```

## Торговые сигналы

Система генерирует следующие типы сигналов:

- **BUY**: Сигнал на покупку
- **SELL**: Сигнал на продажу  
- **HOLD**: Удержание позиции

Каждый сигнал содержит:
- Уверенность (confidence) от 0 до 1
- Силу сигнала (strength)
- Источник (модель нейросети)

## Риск-менеджмент

### Контроль рисков

- Максимальный риск на сделку: 2%
- Максимальный риск портфеля: 10%
- Максимальное количество позиций: 10
- Размер позиции: 10% от капитала

### Метрики риска

- Коэффициент Шарпа
- Максимальная просадка
- Волатильность портфеля
- Концентрация рисков

## Мониторинг и логирование

### Логи

Система ведет подробные логи:
- `logs/investment_system.log` - основные события
- `logs/trading.log` - торговые операции
- `logs/neural_networks.log` - работа нейросетей

### Метрики

- Стоимость портфеля
- Прибыль/убыток
- Количество сделок
- Производительность моделей

## API интеграция

### Поддерживаемые брокеры

- **Бумажная торговля** - для тестирования
- **Tinkoff API** - реальная торговля
- **Сбербанк Инвестор** - реальная торговля

### Настройка реального брокера

```yaml
trading:
  broker: tinkoff
  broker_settings:
    tinkoff:
      token: "your_tinkoff_token"
      sandbox: true
```

## Расширение системы

### Добавление новой нейросети

1. Создайте класс, наследующий от `BaseNeuralNetwork`
2. Реализуйте методы `train()`, `predict()`, `initialize()`
3. Добавьте модель в конфигурацию
4. Зарегистрируйте в `NetworkManager`

### Добавление нового провайдера данных

1. Создайте класс, наследующий от `MarketDataProvider`
2. Реализуйте методы получения данных
3. Обновите конфигурацию

## Безопасность

- Все API ключи хранятся в переменных окружения
- Логи не содержат чувствительных данных
- Поддержка sandbox режима для тестирования

## Производительность

### Оптимизация

- Асинхронная обработка данных
- Кэширование результатов
- Параллельное обучение моделей
- Эффективные алгоритмы ансамбля

### Масштабирование

- Поддержка множества инструментов
- Горизонтальное масштабирование моделей
- Распределенная обработка данных

## Устранение неполадок

### Частые проблемы

1. **Ошибки получения данных**
   - Проверьте интернет-соединение
   - Убедитесь в правильности тикеров
   - Проверьте лимиты API

2. **Проблемы с обучением моделей**
   - Увеличьте объем исторических данных
   - Проверьте параметры моделей
   - Убедитесь в достаточности памяти

3. **Ошибки торговли**
   - Проверьте настройки брокера
   - Убедитесь в наличии средств
   - Проверьте торговые сессии

### Отладка

```python
# Включение подробного логирования
import logging
logging.getLogger().setLevel(logging.DEBUG)

# Проверка статуса системы
status = system.get_system_status()
print(status)
```

## Лицензия

Проект распространяется под лицензией MIT.

## Поддержка

Для получения поддержки:
- Создайте issue в репозитории
- Обратитесь к документации
- Проверьте логи системы

