# üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è GUI —Å —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π —á–µ—Ä–µ–∑ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### **–ü—Ä–æ–±–ª–µ–º–∞:**
GUI –Ω–µ –≤–∏–¥–µ–ª —Å–∏–≥–Ω–∞–ª—ã –∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∞ –¥–∞–Ω–Ω—ã–µ –≤ –¥–æ—Å—Ç—É–ø–Ω–æ–º –¥–ª—è GUI —Ñ–æ—Ä–º–∞—Ç–µ.

### **–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–∞–π–ª—ã –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥.

## üì¶ –ß—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è

### 1. **–î–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è** (`data/portfolio.json`)

```json
{
  "total_value": 1000000,
  "cash_balance": 1000000,
  "positions": {
    "SBER": {
      "quantity": 100,
      "price": 250.5,
      "value": 25050,
      "pnl": 150,
      "pnl_percent": 0.6
    }
  },
  "timestamp": "2025-10-22T14:14:43.541651"
}
```

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—è
- –ë–∞–ª–∞–Ω—Å –Ω–∞–ª–∏—á–Ω—ã—Ö
- –ü–æ–∑–∏—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
  - –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞
  - –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏
  - –ü—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫ (PnL)
  - –ü—Ä–æ—Ü–µ–Ω—Ç PnL
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞

### 2. **–¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã** (`data/signals.json`)

```json
[
  {
    "time": "14:15:30",
    "symbol": "SBER",
    "signal": "BUY",
    "confidence": 0.75,
    "action": "–°–∏–≥–Ω–∞–ª: BUY",
    "price": 250.5
  },
  {
    "time": "14:16:45",
    "symbol": "GAZP",
    "signal": "SELL",
    "confidence": 0.68,
    "action": "–°–∏–≥–Ω–∞–ª: SELL",
    "price": 180.2
  }
]
```

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –í—Ä–µ–º—è —Å–∏–≥–Ω–∞–ª–∞
- –°–∏–º–≤–æ–ª –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- –¢–∏–ø —Å–∏–≥–Ω–∞–ª–∞ (BUY/SELL/HOLD)
- –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ (0-1)
- –û–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
- –¶–µ–Ω–∞ –≤ –º–æ–º–µ–Ω—Ç —Å–∏–≥–Ω–∞–ª–∞
- **–•—Ä–∞–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–∏–≥–Ω–∞–ª–æ–≤**

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### **–ù–æ–≤—ã–π —Ü–∏–∫–ª —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ:**

```python
async def _export_loop(self):
    """–¶–∏–∫–ª —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è GUI"""
    while self.is_running:
        try:
            # –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ä—Ç—Ñ–µ–ª—è
            await self._export_portfolio_data()
            
            # –≠–∫—Å–ø–æ—Ä—Ç —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
            await self._export_signals_data()
            
            # –≠–∫—Å–ø–æ—Ä—Ç –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
            await asyncio.sleep(10)
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö: {e}")
            await asyncio.sleep(30)
```

### **–ú–µ—Ç–æ–¥ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è:**

```python
async def _export_portfolio_data(self):
    """–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ä—Ç—Ñ–µ–ª—è –≤ JSON"""
    # –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ data
    data_dir = Path("data")
    data_dir.mkdir(exist_ok=True)
    
    # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    portfolio_data = {
        'total_value': total_value,
        'cash_balance': cash_balance,
        'positions': positions_dict,
        'timestamp': datetime.now().isoformat()
    }
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
    with open("data/portfolio.json", 'w') as f:
        json.dump(portfolio_data, f, indent=2)
```

### **–ú–µ—Ç–æ–¥ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:**

```python
async def _export_signals_data(self):
    """–≠–∫—Å–ø–æ—Ä—Ç —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ JSON"""
    # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–∑ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞
    signals = await self.trading_engine.get_trading_signals()
    
    # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    signals_data = []
    for symbol, signal_info in signals.items():
        signals_data.append({
            'time': datetime.now().strftime("%H:%M:%S"),
            'symbol': symbol,
            'signal': signal_info['action'],
            'confidence': signal_info['confidence'],
            'price': signal_info['price']
        })
    
    # –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
    existing_signals = load_existing_signals()
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö
    existing_signals.extend(signals_data)
    
    # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 50 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö
    existing_signals = existing_signals[-50:]
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    save_signals(existing_signals)
```

## üìä –ö–∞–∫ GUI —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

### **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ä—Ç—Ñ–µ–ª—è:**

```python
def load_system_data(self):
    """–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–∏—Å—Ç–µ–º—ã"""
    # –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è
    portfolio_file = Path("data/portfolio.json")
    if portfolio_file.exists():
        with open(portfolio_file, 'r') as f:
            portfolio_data = json.load(f)
            self.portfolio_value = portfolio_data['total_value']
            self.current_positions = portfolio_data['positions']
    
    # –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
    signals_file = Path("data/signals.json")
    if signals_file.exists():
        with open(signals_file, 'r') as f:
            self.trading_signals = json.load(f)
```

### **–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

- **–°–∏—Å—Ç–µ–º–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç:** –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- **GUI –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:** –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- **GUI –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¢–æ—Ä–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞: –¢–æ—Ä–≥–æ–≤–ª—è –∏ –∞–Ω–∞–ª–∏–∑
- GUI: –¢–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- –°–≤—è–∑—å —á–µ—Ä–µ–∑ —Ñ–∞–π–ª—ã: –ü—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è

### ‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**
- –°–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
- –ü–∞–¥–µ–Ω–∏–µ GUI –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é
- –ü–∞–¥–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–∏ –≤–∏–¥–Ω–æ –≤ GUI

### ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ—Ç–ª–∞–¥–∫–∏:**
- –î–∞–Ω–Ω—ã–µ –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (JSON)
- –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é
- –õ–µ–≥–∫–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è

### ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥—Ä—É–≥–∏–µ GUI
- –ú–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑–≤–Ω–µ

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–∞–Ω–Ω—ã—Ö

```
–¢–æ—Ä–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (run.py)
  ‚îî‚îÄ –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞
  ‚îî‚îÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
  ‚îî‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º
  ‚îî‚îÄ [–ö–∞–∂–¥—ã–µ 10 —Å–µ–∫] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
       ‚îú‚îÄ data/portfolio.json
       ‚îî‚îÄ data/signals.json

GUI (gui_launcher.py)
  ‚îî‚îÄ [–ö–∞–∂–¥—ã–µ 10 —Å–µ–∫] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
       ‚îú‚îÄ –ß—Ç–µ–Ω–∏–µ data/portfolio.json
       ‚îî‚îÄ –ß—Ç–µ–Ω–∏–µ data/signals.json
  ‚îî‚îÄ [–ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
       ‚îú‚îÄ –ì—Ä–∞—Ñ–∏–∫–∏
       ‚îú‚îÄ –¢–∞–±–ª–∏—Ü—ã
       ‚îî‚îÄ –ú–µ—Ç—Ä–∏–∫–∏
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ data

```
data/
‚îú‚îÄ‚îÄ portfolio.json     # –î–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫)
‚îî‚îÄ‚îÄ signals.json       # –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50)
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã:**

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ—Ä–≥–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
python run.py

# 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 10 —Å–µ–∫—É–Ω–¥ (–ø–µ—Ä–≤—ã–π —ç–∫—Å–ø–æ—Ä—Ç)

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å GUI
python gui_launcher.py
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è
type data\portfolio.json

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã
type data\signals.json
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å GUI **–≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –∏–∑ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—è
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

---

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–µ–≤–∏–¥–∏–º–æ—Å—Ç—å—é —Å–∏–≥–Ω–∞–ª–æ–≤ —Ä–µ—à–µ–Ω–∞!** üéâ
