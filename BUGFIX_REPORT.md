# üêõ –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ - 22.10.2025

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ `portfolio_manager.py`**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
ERROR | src.portfolio.portfolio_manager:_calculate_symbol_position:200 - 
–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è SBER: unsupported operand type(s) for *: 'float' and 'coroutine'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–ú–µ—Ç–æ–¥ `_get_current_price()` –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `async`, –Ω–æ –≤—ã–∑—ã–≤–∞–ª—Å—è –±–µ–∑ `await` –≤ –º–µ—Ç–æ–¥–µ `_calculate_symbol_position()`.

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –î–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
def _calculate_symbol_position(self, symbol: str, transactions: List[Transaction]) -> Optional[Position]:
    ...
    current_price = self._get_current_price(symbol)  # ‚ùå –ù–µ—Ç await
    market_value = total_quantity * current_price    # ‚ùå –û—à–∏–±–∫–∞: —É–º–Ω–æ–∂–µ–Ω–∏–µ float –Ω–∞ coroutine

# –ü–æ—Å–ª–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
async def _calculate_symbol_position(self, symbol: str, transactions: List[Transaction]) -> Optional[Position]:
    ...
    current_price = await self._get_current_price(symbol)  # ‚úÖ –° await
    market_value = total_quantity * current_price           # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
```

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/portfolio/portfolio_manager.py` (—Å—Ç—Ä–æ–∫–∏ 145, 181, 136)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü–æ—Ä—Ç—Ñ–µ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ —Ç—Ä–µ–±–æ–≤–∞–ª –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –û—à–∏–±–∫–∞ `EOFError: EOF when reading a line` –ø—Ä–∏ –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
- –ù–µ—É–¥–æ–±–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
–ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `run.py` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `test_config.yaml` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```python
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
if not args.select_config and not args.config:
    print("‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–±—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º)")
    print("   –î–ª—è –≤—ã–±–æ—Ä–∞ –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: python run.py --select-config")
    args.config = "config/test_config.yaml"
```

**–¢–µ–ø–µ—Ä—å:**
```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ —Å —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
python run.py

# –í—ã–±–æ—Ä –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python run.py --select-config

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
python run.py --config config/aggressive_trading.yaml
```

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `run.py` (—Å—Ç—Ä–æ–∫–∏ 337-351)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –≤—ã–±–æ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç:

**`data/portfolio.json`** (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥):
```json
{
  "total_value": 102459.2679,
  "cash_balance": 109859.2679,
  "positions": {
    "SBER": {
      "quantity": -74.0,
      "price": 100.0,
      "value": -7400.0,
      "pnl": -7400.0,
      "pnl_percent": 0
    }
  },
  "timestamp": "2025-10-22T14:30:40.119210"
}
```

**`data/signals.json`** (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥):
- –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –æ—Ç –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- SELL, BUY, HOLD —Å —É—Ä–æ–≤–Ω–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –õ–æ–≥–∏ —á–∏—Å—Ç—ã–µ:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (14:30)
type logs\neural_networks.log | findstr /C:"14:30" | findstr /C:"ERROR"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–µ—Ç –æ—à–∏–±–æ–∫ ‚úÖ
```

### –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –†–∞–±–æ—Ç–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON
- ‚úÖ GUI –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

---

## üéØ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–¢–µ–ø–µ—Ä—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `test_config.yaml` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- **–ê–Ω–∞–ª–∏–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º–∏**: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤**: –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
- **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**: –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Å–¥–µ–ª–∫–∞–º–∏**: 1 –º–∏–Ω—É—Ç–∞
- **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏**: 5% –æ—Ç –∫–∞–ø–∏—Ç–∞–ª–∞
- **–ü–æ—Ä–æ–≥ —Å–∏–≥–Ω–∞–ª–∞**: 50%

–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è:
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å GUI
- ‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –ó–∞–ø—É—Å–∫ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:
```bash
python run.py
```

**–í—ã–≤–æ–¥:**
```
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–±—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º)
   –î–ª—è –≤—ã–±–æ—Ä–∞ –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: python run.py --select-config

14:30:01 | INFO | –°–∏—Å—Ç–µ–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
14:30:05 | INFO | –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∑–∞–ø—É—â–µ–Ω—ã
```

### 2. –ó–∞–ø—É—Å–∫ GUI (—á–µ—Ä–µ–∑ 10-15 —Å–µ–∫—É–Ω–¥):
```bash
python gui_launcher.py
```

**GUI –ø–æ–∫–∞–∂–µ—Ç:**
- –°—Ç–∞—Ç—É—Å: "–ó–∞–ø—É—â–µ–Ω–∞" ‚úÖ
- –ö–∞–ø–∏—Ç–∞–ª: –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–∑–∏—Ü–∏–∏: —Ç–µ–∫—É—â–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- –°–∏–≥–Ω–∞–ª—ã: –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- –ì—Ä–∞—Ñ–∏–∫–∏: –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö**
   - –î–æ–±–∞–≤–∏—Ç—å –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –¥–∏—Å–∫
   - –°–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

2. **–£–ª—É—á—à–µ–Ω–∏–µ GUI**
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –ú–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π
   - –ê–Ω–∞–ª–∏–∑ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π

4. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞—Å—á–µ—Ç–æ–≤ –ø–æ—Ä—Ç—Ñ–µ–ª—è
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üìù –†–µ–∑—é–º–µ

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å coroutine –≤ `portfolio_manager`
2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏ —Å–∏–≥–Ω–∞–ª–æ–≤
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è GUI —Å —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –¢–æ—Ä–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- ‚úÖ GUI –≤–∏–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ

**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è:** 14:30  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚úÖ
